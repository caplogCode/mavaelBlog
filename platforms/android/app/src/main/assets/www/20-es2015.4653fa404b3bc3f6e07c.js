(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"4aFt":function(l,n,e){"use strict";e.r(n);var t=e("8Y7J");class o{}var u=e("pMnS"),i=e("MKJQ"),a=e("sZkV"),r=e("s7LF"),s=e("SVse"),c=e("mrSG"),b=e("QIw3"),d=e("a3Cf"),h=function(l){function n(){var n=null!==l&&l.apply(this,arguments)||this;return n.DestinationType={DATA_URL:0,FILE_URI:1,NATIVE_URI:2},n.EncodingType={JPEG:0,PNG:1},n.MediaType={PICTURE:0,VIDEO:1,ALLMEDIA:2},n.PictureSourceType={PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2},n.PopoverArrowDirection={ARROW_UP:1,ARROW_DOWN:2,ARROW_LEFT:4,ARROW_RIGHT:8,ARROW_ANY:15},n.Direction={BACK:0,FRONT:1},n}return Object(c.c)(n,l),n.prototype.getPicture=function(l){return Object(d.cordova)(this,"getPicture",{callbackOrder:"reverse"},arguments)},n.prototype.cleanup=function(){return Object(d.cordova)(this,"cleanup",{platforms:["iOS"]},arguments)},n.pluginName="Camera",n.plugin="cordova-plugin-camera",n.pluginRef="navigator.camera",n.repo="https://github.com/apache/cordova-plugin-camera",n.platforms=["Android","Browser","iOS","Windows"],n}(d.IonicNativePlugin),p=e("wD+u"),g=e("iInd"),m=e("VRCc");let f=(()=>{class l{constructor(l,n,e,t,o,u,i){this.afs=l,this.router=n,this.loadingCtrl=e,this.toastr=t,this.photoLibrary=o,this.camera=u,this.afAuth=i,this.photos=[],this.userFireUID=""}ngOnInit(){setTimeout(()=>{this.getUID()},500)}takePhoto(){this.photoLibrary.requestAuthorization().then(()=>{this.photoLibrary.getLibrary().subscribe({next:l=>{l.forEach((function(l){console.log(l.id),console.log(l.photoURL),console.log(l.thumbnailURL),console.log(l.fileName),console.log(l.width),console.log(l.height),console.log(l.creationDate),console.log(l.latitude),console.log(l.longitude),console.log(l.albumIds)}))},error:l=>{console.log("could not get photos")},complete:()=>{console.log("done getting photos")}})}).catch(l=>console.log("permissions weren't granted"))}getRandomNumber(l){return Math.floor(Math.random()*l)}getCardFomatColor(l){switch(l){case 1:return"success";case 2:return"primary";case 3:return"tertiary";case 4:return"warning";case 5:return"light";case 6:return"medium";case 7:return"secondary"}}test(){this.addTask()}addTask(){return c.a(this,void 0,void 0,(function*(){{const n=yield this.loadingCtrl.create({message:"Post wird verarbeitet...",spinner:"crescent",showBackdrop:!0});n.present();const e=Date.now();new Date(1e3*e);var l=new Date;const t=String(l.getDate()).padStart(2,"0")+"."+String(l.getMonth()+1).padStart(2,"0")+"."+l.getFullYear();console.log(t);const o=t,u=this.afs.createId(),i=(yield this.afAuth.currentUser).uid,a=(yield this.afAuth.currentUser).displayName;this.afs.collection("users").doc(i).collection("ownPosts").doc(u).set({postId:u,title:this.title,body:this.body,timestamp:o,user:a,cardColor:this.getCardFomatColor(this.getRandomNumber(7)),uid:this.userFireUID}).then(()=>{n.dismiss(),this.toast("Beitrag wurde erfolgreich gepostet!","success"),this.router.navigate(["//app/tabs/schedule"]),this.afs.collection("posts").doc(u).set({postId:u,title:this.title,body:this.body,timestamp:o,user:a,cardColor:this.getCardFomatColor(this.getRandomNumber(7)),uid:this.userFireUID}).then(()=>{n.dismiss()}).catch(l=>{n.dismiss(),this.toast(l.message,"danger")})}).catch(l=>{n.dismiss(),this.toast(l.message,"danger")})}}))}getAuthUsername(){return c.a(this,void 0,void 0,(function*(){const l=(yield this.afAuth.currentUser).displayName;return document.getElementById("userInputName").innerText=l,l}))}getUID(){return c.a(this,void 0,void 0,(function*(){let l="";this.afAuth.currentUser.then(n=>{l=n.uid,this.userFireUID=l,console.log(this.userFireUID)})}))}pushToDB(l,n,e,t){this.afs.collection(l).doc(n).collection(e).doc(e).set({postId:n,title:this.title,body:this.body,timestamp:Date.now()})}loadSaved(){}toast(l,n){return c.a(this,void 0,void 0,(function*(){(yield this.toastr.create({message:l,position:"bottom",color:n,duration:2e3})).present()}))}takePicture(){this.camera.getPicture({quality:100,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(l=>{this.photos.unshift({data:"data:image/jpeg;base64,"+l})},l=>{console.log("Camera issue: "+l)})}}return l.ngInjectableDef=t.Pb({factory:function(){return new l(t.Qb(p.a),t.Qb(g.m),t.Qb(a.Db),t.Qb(a.Nb),t.Qb(b.a),t.Qb(h),t.Qb(m.a))},token:l,providedIn:"root"}),l})();var C=t.ob({encapsulation:0,styles:[[".forecast_container[_ngcontent-%COMP%]{overflow-x:scroll!important;overflow-y:hidden;word-wrap:break-word;height:20vw;font-size:.8em;font-weight:300}"]],data:{}});function y(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,2,"ion-col",[["col-6",""]],null,null,null,i.ob,i.n)),t.pb(1,49152,null,0,a.u,[t.h,t.k,t.x],null,null),(l()(),t.qb(2,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null))],null,(function(l,n){l(n,2,0,n.context.$implicit.data)}))}function v(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,6,"ion-header",[],null,null,null,i.wb,i.v)),t.pb(1,49152,null,0,a.C,[t.h,t.k,t.x],null,null),(l()(),t.qb(2,0,null,0,4,"ion-toolbar",[],null,null,null,i.bc,i.ab)),t.pb(3,49152,null,0,a.Ab,[t.h,t.k,t.x],null,null),(l()(),t.qb(4,0,null,0,2,"ion-title",[],null,null,null,i.Zb,i.Y)),t.pb(5,49152,null,0,a.yb,[t.h,t.k,t.x],null,null),(l()(),t.Jb(-1,0,["Beitrag verfassen"])),(l()(),t.qb(7,0,null,null,52,"ion-content",[],null,null,null,i.pb,i.o)),t.pb(8,49152,null,0,a.v,[t.h,t.k,t.x],null,null),(l()(),t.qb(9,0,null,0,12,"ion-card",[],null,null,null,i.lb,i.g)),t.pb(10,49152,null,0,a.n,[t.h,t.k,t.x],null,null),(l()(),t.qb(11,0,null,0,10,"ion-item",[],null,null,null,i.Cb,i.y)),t.pb(12,49152,null,0,a.I,[t.h,t.k,t.x],null,null),(l()(),t.qb(13,0,null,0,8,"ion-input",[["name","title"],["placeholder","Titel"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var o=!0,u=l.component;return"ionBlur"===n&&(o=!1!==t.Cb(l,16)._handleBlurEvent(e.target)&&o),"ionChange"===n&&(o=!1!==t.Cb(l,16)._handleInputEvent(e.target)&&o),"ngModelChange"===n&&(o=!1!==(u.title=e)&&o),o}),i.yb,i.x)),t.pb(14,16384,null,0,r.j,[],{required:[0,"required"]},null),t.Gb(1024,null,r.c,(function(l){return[l]}),[r.j]),t.pb(16,16384,null,0,a.Mb,[t.k],null,null),t.Gb(1024,null,r.d,(function(l){return[l]}),[a.Mb]),t.pb(18,671744,null,0,r.i,[[8,null],[6,r.c],[8,null],[6,r.d]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Gb(2048,null,r.e,null,[r.i]),t.pb(20,16384,null,0,r.f,[[4,r.e]],null,null),t.pb(21,49152,null,0,a.H,[t.h,t.k,t.x],{name:[0,"name"],placeholder:[1,"placeholder"],required:[2,"required"],type:[3,"type"]},null),(l()(),t.qb(22,0,null,0,12,"ion-card",[],null,null,null,i.lb,i.g)),t.pb(23,49152,null,0,a.n,[t.h,t.k,t.x],null,null),(l()(),t.qb(24,0,null,0,10,"ion-item",[],null,null,null,i.Cb,i.y)),t.pb(25,49152,null,0,a.I,[t.h,t.k,t.x],null,null),(l()(),t.qb(26,0,null,0,8,"ion-textarea",[["cols","80"],["name","body"],["placeholder","Beitrag..."],["required",""],["rows","14"],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,e){var o=!0,u=l.component;return"ionBlur"===n&&(o=!1!==t.Cb(l,29)._handleBlurEvent(e.target)&&o),"ionChange"===n&&(o=!1!==t.Cb(l,29)._handleInputEvent(e.target)&&o),"ngModelChange"===n&&(o=!1!==(u.body=e)&&o),o}),i.Yb,i.X)),t.pb(27,16384,null,0,r.j,[],{required:[0,"required"]},null),t.Gb(1024,null,r.c,(function(l){return[l]}),[r.j]),t.pb(29,16384,null,0,a.Mb,[t.k],null,null),t.Gb(1024,null,r.d,(function(l){return[l]}),[a.Mb]),t.pb(31,671744,null,0,r.i,[[8,null],[6,r.c],[8,null],[6,r.d]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t.Gb(2048,null,r.e,null,[r.i]),t.pb(33,16384,null,0,r.f,[[4,r.e]],null,null),t.pb(34,49152,null,0,a.wb,[t.h,t.k,t.x],{cols:[0,"cols"],name:[1,"name"],placeholder:[2,"placeholder"],required:[3,"required"],rows:[4,"rows"]},null),(l()(),t.qb(35,0,null,0,2,"ion-button",[["class","ion-padding"],["expand","block"],["shape","round"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.test()&&t),t}),i.fb,i.e)),t.pb(36,49152,null,0,a.l,[t.h,t.k,t.x],{expand:[0,"expand"],shape:[1,"shape"]},null),(l()(),t.Jb(-1,0,["Posten"])),(l()(),t.qb(38,0,null,0,5,"ion-grid",[],null,null,null,i.vb,i.u)),t.pb(39,49152,null,0,a.B,[t.h,t.k,t.x],null,null),(l()(),t.qb(40,0,null,0,3,"ion-row",[["class","forecast_container"]],null,null,null,i.Lb,i.K)),t.pb(41,49152,null,0,a.hb,[t.h,t.k,t.x],null,null),(l()(),t.fb(16777216,null,0,1,null,y)),t.pb(43,278528,null,0,s.i,[t.N,t.J,t.q],{ngForOf:[0,"ngForOf"]},null),(l()(),t.qb(44,0,null,0,15,"ion-fab",[["horizontal","end"],["slot","fixed"],["vertical","bottom"]],null,null,null,i.tb,i.q)),t.pb(45,49152,null,0,a.x,[t.h,t.k,t.x],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(l()(),t.qb(46,0,null,0,3,"ion-fab-button",[],null,null,null,i.rb,i.r)),t.pb(47,49152,null,0,a.y,[t.h,t.k,t.x],null,null),(l()(),t.qb(48,0,null,0,1,"ion-icon",[["name","share"]],null,null,null,i.xb,i.w)),t.pb(49,49152,null,0,a.D,[t.h,t.k,t.x],{name:[0,"name"]},null),(l()(),t.qb(50,0,null,0,9,"ion-fab-list",[["side","start"]],null,null,null,i.sb,i.s)),t.pb(51,49152,null,0,a.z,[t.h,t.k,t.x],{side:[0,"side"]},null),(l()(),t.qb(52,0,null,0,3,"ion-fab-button",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.takePicture()&&t),t}),i.rb,i.r)),t.pb(53,49152,null,0,a.y,[t.h,t.k,t.x],null,null),(l()(),t.qb(54,0,null,0,1,"ion-icon",[["name","cloud-upload-outline"]],null,null,null,i.xb,i.w)),t.pb(55,49152,null,0,a.D,[t.h,t.k,t.x],{name:[0,"name"]},null),(l()(),t.qb(56,0,null,0,3,"ion-fab-button",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.takePicture()&&t),t}),i.rb,i.r)),t.pb(57,49152,null,0,a.y,[t.h,t.k,t.x],null,null),(l()(),t.qb(58,0,null,0,1,"ion-icon",[["name","camera"]],null,null,null,i.xb,i.w)),t.pb(59,49152,null,0,a.D,[t.h,t.k,t.x],{name:[0,"name"]},null)],(function(l,n){var e=n.component;l(n,14,0,""),l(n,18,0,"title",e.title),l(n,21,0,"title","Titel","","text"),l(n,27,0,""),l(n,31,0,"body",e.body),l(n,34,0,"80","body","Beitrag...","","14"),l(n,36,0,"block","round"),l(n,43,0,e.photos),l(n,45,0,"end","bottom"),l(n,49,0,"share"),l(n,51,0,"start"),l(n,55,0,"cloud-upload-outline"),l(n,59,0,"camera")}),(function(l,n){l(n,13,0,t.Cb(n,14).required?"":null,t.Cb(n,20).ngClassUntouched,t.Cb(n,20).ngClassTouched,t.Cb(n,20).ngClassPristine,t.Cb(n,20).ngClassDirty,t.Cb(n,20).ngClassValid,t.Cb(n,20).ngClassInvalid,t.Cb(n,20).ngClassPending),l(n,26,0,t.Cb(n,27).required?"":null,t.Cb(n,33).ngClassUntouched,t.Cb(n,33).ngClassTouched,t.Cb(n,33).ngClassPristine,t.Cb(n,33).ngClassDirty,t.Cb(n,33).ngClassValid,t.Cb(n,33).ngClassInvalid,t.Cb(n,33).ngClassPending)}))}function k(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,1,"app-add-post",[],null,null,null,v,C)),t.pb(1,114688,null,0,f,[p.a,g.m,a.Db,a.Nb,b.a,h,m.a],null,null)],(function(l,n){l(n,1,0)}),null)}var A=t.mb("app-add-post",f,k,{},{},[]),q=e("xgBC");let w=(()=>{class l{constructor(l,n){this.camera=l,this.storage=n,this.photos=[]}takePicture(){this.camera.getPicture({quality:100,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(l=>{this.photos.unshift({data:"data:image/jpeg;base64,"+l}),this.storage.set("photos",this.photos)},l=>{console.log("Camera issue: "+l)})}loadSaved(){this.storage.get("photos").then(l=>{this.photos=l||[]})}}return l.ngInjectableDef=t.Pb({factory:function(){return new l(t.Qb(h),t.Qb(q.b))},token:l,providedIn:"root"}),l})();class x{}e.d(n,"AddPostPageModuleNgFactory",(function(){return I}));var I=t.nb(o,[],(function(l){return t.zb([t.Ab(512,t.j,t.Y,[[8,[u.a,A]],[3,t.j],t.v]),t.Ab(4608,s.l,s.k,[t.s,[2,s.v]]),t.Ab(4608,r.l,r.l,[]),t.Ab(4608,a.c,a.c,[t.x,t.g]),t.Ab(4608,a.Fb,a.Fb,[a.c,t.j,t.p]),t.Ab(4608,a.Jb,a.Jb,[a.c,t.j,t.p]),t.Ab(4608,h,h,[]),t.Ab(4608,w,w,[h,q.b]),t.Ab(4608,b.a,b.a,[]),t.Ab(1073742336,s.b,s.b,[]),t.Ab(1073742336,r.k,r.k,[]),t.Ab(1073742336,r.b,r.b,[]),t.Ab(1073742336,a.Cb,a.Cb,[]),t.Ab(1073742336,g.q,g.q,[[2,g.v],[2,g.m]]),t.Ab(1073742336,x,x,[]),t.Ab(1073742336,q.a,q.a,[]),t.Ab(1073742336,o,o,[]),t.Ab(1024,g.k,(function(){return[[{path:"",component:f}]]}),[])])}))}}]);